<h1 align="center">API</h1>

This is the backend of our SQL query optimization visualizer.

## Installation and setup

1. Ensure that you have [Poetry](https://python-poetry.org/docs/) (A package manager for Python) and at minimum [Python 3.8](https://www.python.org/downloads/) installed.
2. `cd` into this folder and run `poetry install` to install the Python package dependencies for this backend. We are using Flask as a web server.
3. By default, the API server starts in production mode. To run in development mode and enable hot reloading, create an `.env` file in this folder and add the following environment variables:

```
FLASK_APP=app.py
FLASK_ENV=development
```

4. You will have to connect to a Postgresql database to run the query. This database should be populated with dummy data generated by [TPC-H](http://www.tpc.org/tpch/). See the main README if you have not generated the TPC-H dataset.
5. There are two ways to connect to the database. The first way is to input your database details directly in the frontend client itself, but the state will only persist until the page is refreshed. If you do not want to type in your details every time, fill up the `.env` file with the following information about your Postgresql database:

```
DB_USER=postgres // Username
DB_PASSWORD=postgres // Password
DB_HOST=localhost // Database server host IP
DB_PORT=5432 // Database server port number
DB_NAME=TPC-H // Database name
```

6. To start the API server, you can run `poetry run flask run` from this folder, or head back up to the `frontend` folder and run `yarn start`, which starts both the frontend client and the API server concurrently.
